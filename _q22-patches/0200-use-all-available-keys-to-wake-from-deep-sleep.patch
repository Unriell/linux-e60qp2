From b0f9aab5d1a87771a157fad2432412c337586c88 Mon Sep 17 00:00:00 2001
From: Heiko Stuebner <heiko@sntech.de>
Date: Tue, 28 Apr 2015 16:45:42 +0200
Subject: [PATCH 200/200] use all available keys to wake from deep sleep

---
 drivers/input/keyboard/gpio_keys.c | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

diff --git a/drivers/input/keyboard/gpio_keys.c b/drivers/input/keyboard/gpio_keys.c
index 19a95df..a9cad17 100644
--- a/drivers/input/keyboard/gpio_keys.c
+++ b/drivers/input/keyboard/gpio_keys.c
@@ -612,7 +612,7 @@ static int gpio_keys_suspend(struct device *dev)
 	struct gpio_keys_platform_data *pdata = pdev->dev.platform_data;
 	int i;
 
-	if (device_may_wakeup(&pdev->dev) && !gSleep_Mode_Suspend) {
+//	if (device_may_wakeup(&pdev->dev) && !gSleep_Mode_Suspend) {
 		for (i = 0; i < pdata->nbuttons; i++) {
 			struct gpio_keys_button *button = &pdata->buttons[i];
 			if (button->wakeup) {
@@ -620,7 +620,7 @@ static int gpio_keys_suspend(struct device *dev)
 				enable_irq_wake(irq);
 			}
 		}
-	}
+//	}
 
 	return 0;
 }
@@ -632,12 +632,12 @@ static int gpio_keys_resume(struct device *dev)
 	struct gpio_keys_platform_data *pdata = pdev->dev.platform_data;
 	int i;
 	
-	if (gSleep_Mode_Suspend)
-		return 0;
+//	if (gSleep_Mode_Suspend)
+//		return 0;
 	for (i = 0; i < pdata->nbuttons; i++) {
 
 		struct gpio_keys_button *button = &pdata->buttons[i];
-		if (button->wakeup && device_may_wakeup(&pdev->dev)) {
+		if (button->wakeup /* && device_may_wakeup(&pdev->dev) */) {
 			int irq = gpio_to_irq(button->gpio);
 			disable_irq_wake(irq);
 		}
-- 
2.5.3

